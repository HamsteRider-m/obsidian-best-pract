---
name: obos
description: "Obsidian vault management. Use when user runs /obos commands to manage vault structure, daily notes, weekly reviews, save insights, or sync index files."
metadata:
  short-description: Obsidian vault management
---

# Obsidian Best Practices (obos)

Manage an Obsidian vault with AI-friendly structure.

## Commands

| Command | Description |
|---------|-------------|
| `/obos init` | Initialize vault structure |
| `/obos daily` | Create/open today's daily note |
| `/obos weekly` | Generate weekly review |
| `/obos save [type]` | Save conversation insight |
| `/obos sync` | Sync AI index files |

## Vault Path Discovery (shared by all commands)

Determine vault path in this order:
1. Current working directory — if it contains `CLAUDE.md` with vault-related content or has `.obsidian/`
2. Fallback: `/Users/hansonmei/OneDrive/obsidian-vault/`
3. If neither exists, ask user with AskUserQuestion

## Vault Structure

```
Vault/
├── CLAUDE.md
├── Index.md
├── Daily/
├── Notes/
├── Clippings/
├── References/
├── Attachments/
├── Categories/
└── Templates/
```

## Command Routing

Parse the first argument after `/obos` and execute the matching command below. If no argument is given, show the command table above and ask what the user wants to do.

---

## /obos init

Initialize an Obsidian vault with AI-friendly structure.

### Steps

1. **Determine vault path** using Vault Path Discovery above. If current directory has markdown files or `.obsidian/`, use it. Otherwise ask user.

2. **Create directories**:
   ```
   Daily/ Notes/ Clippings/ References/ Attachments/ Categories/ Templates/
   ```

3. **Generate CLAUDE.md** with this template:

   ```markdown
   # CLAUDE.md

   This file teaches AI assistants about this knowledge vault.

   ## About This Vault

   [User should describe their vault's purpose and focus areas]

   ## Structure

   - `Daily/` - Daily notes (YYYY-MM-DD.md) and weekly reviews
   - `Notes/` - Evergreen notes (atomic, linked ideas)
   - `Clippings/` - Web clippings and highlights
   - `References/` - Source materials (books, articles)
   - `Categories/` - MOC (Map of Content) index pages
   - `Attachments/` - Images and files

   ## Conventions

   - Note titles: Descriptive, noun phrases
   - Links: Use `[[wikilinks]]`
   - Tags: Minimal, prefer links over tags

   ## Key Topics

   [List main areas of interest]

   ## Active Projects

   [Current focus areas]
   ```

4. **Generate Index.md**:

   ```markdown
   # Index

   AI-readable index of vault contents. Auto-generated by `/obos sync`.

   ## Recent Notes

   (empty - run `/obos sync` to populate)

   ## Categories

   (empty - run `/obos sync` to populate)

   ## Statistics

   - Total notes: 0
   - Last synced: never
   ```

5. **Create Templates**:

   `Templates/Daily.md`:
   ```markdown
   # {{date}}

   ## Plan

   -

   ## Log

   -

   ## Thoughts

   ```

   `Templates/Evergreen.md`:
   ```markdown
   # {{title}}

   ## Summary



   ## Details



   ## Related

   -
   ```

6. **Output**: Report created directories and files. Suggest editing CLAUDE.md.

---

## /obos daily

Create or open today's daily note.

### Steps

1. **Determine vault path** using Vault Path Discovery.
2. **Get today's date** in `YYYY-MM-DD` format.
3. **Check** if `Daily/{YYYY-MM-DD}.md` exists.
4. **If not exists**, create from template:
   ```markdown
   # {YYYY-MM-DD}

   ## Plan

   -

   ## Log

   -

   ## Thoughts

   ```
5. **If exists**, read and display a summary.
6. **Output**: Path, status (Created/Already exists), content preview.

---

## /obos weekly

Generate weekly review from daily notes.

### Steps

1. **Determine vault path** using Vault Path Discovery.
2. **Calculate current week** (Monday to Sunday), format dates as `YYYY-MM-DD`.
3. **Read daily notes** in range: `Daily/{date}.md` for each day.
4. **Analyze**: Extract completed tasks, key thoughts, recurring themes, unfinished items.
5. **Generate** `Daily/{YYYY}-W{WW}.md`:
   ```markdown
   # Week {WW} Review ({start-date} ~ {end-date})

   ## Highlights

   - {key accomplishment}

   ## Insights

   {Notable thoughts}

   ## Patterns

   {Recurring themes}

   ## Carry Forward

   - [ ] {unfinished item}

   ## Daily Summary

   | Day | Key Activity |
   |-----|--------------|
   | Mon | ... |
   | Tue | ... |
   ```
6. **Suggest Evergreen Notes** if any insight is worth preserving long-term.

---

## /obos save [type]

Save conversation insights to the vault.

### Types

- `evergreen` — Standalone concept, reusable idea → `Notes/{title}.md`
- `daily` — Task update, fleeting thought → append to `Daily/{YYYY-MM-DD}.md`
- `clip` — External content, quote → `Clippings/{title}.md`

If type is omitted, auto-detect based on content.

### Steps

1. **Determine vault path** using Vault Path Discovery.
2. **Extract insight** from current conversation: key conclusion, context, related topics.
3. **Determine type** if not specified.
4. **Generate content** based on type:

   **Evergreen** (`Notes/{title}.md`):
   ```markdown
   # {Title}

   {One-paragraph summary}

   ## Details

   {Expanded content}

   ## Source

   - Conversation: {date}
   - Context: {brief context}

   ## Related

   - [[related note 1]]
   ```

   **Daily** (append to `Daily/{YYYY-MM-DD}.md`):
   ```markdown
   ## {HH:MM} - {brief title}

   {content}
   ```

   **Clip** (`Clippings/{title}.md`):
   ```markdown
   # {Title}

   Source: {url or "AI conversation"}
   Date: {YYYY-MM-DD}

   ## Content

   {clipped content}

   ## Notes

   {annotations}
   ```

5. **Confirm with user** before writing: show type, path, preview.
6. **Write file**.

---

## /obos sync

Sync AI index files (Index.md and CLAUDE.md).

### Steps

1. **Determine vault path** using Vault Path Discovery.
2. **Scan vault**: Collect titles, first paragraphs, tags, links, modified dates from `Notes/`, `Daily/`, `Clippings/`, `References/`, `Categories/`.
3. **Update Index.md**:
   ```markdown
   # Index

   AI-readable index of vault contents.
   Last synced: {YYYY-MM-DD HH:MM}

   ## Recent Notes

   | Note | Summary | Updated |
   |------|---------|---------|
   | [[note1]] | First line... | 2026-01-27 |
   (top 20 by modified date)

   ## Categories

   - [[Category/Topic1]] - {count} notes

   ## Statistics

   - Evergreen notes: {count}
   - Daily notes: {count}
   - Clippings: {count}
   - References: {count}
   ```
4. **Update CLAUDE.md** — append/update "Current Context" section:
   ```markdown
   ## Current Context

   Last synced: {date}

   ### Recent Activity
   - {recent note 1}

   ### Active Topics
   - {topic with most recent notes}
   ```
5. **Output**: Note count indexed, confirmation.
